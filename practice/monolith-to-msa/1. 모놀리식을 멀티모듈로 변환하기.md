### 1. 모놀리식을 멀티모듈로 변환하기

- 모놀리식 애플리케이션을 MSA(Microservices Architecture)로 전환하는 첫 번째 단계는 단일 모듈 구조를 멀티모듈 구조로 변경하는 것입니다.  
- 이 과정을 통해 도메인별로 코드를 분리하고, 향후 독립적인 서비스로 분리할 수 있는 기반을 마련합니다.

<br />

### 변환 전후 프로젝트 구조 비교

#### Before: 모놀리식 구조

```
ecommerce-monolith-to-msa/
├── src/main/java/
│   ├── global/
│   ├── domain/order/
│   └── Application.java
├── src/main/resources/
├── build.gradle
└── settings.gradle
```

#### After: 멀티모듈 구조

```
ecommerce-monolith-to-msa/                   # 루트 프로젝트
├── build.gradle                             # 루트 빌드 설정
├── settings.gradle                          # 멀티 모듈 설정
├── services/
│   ├── service-user/
│   │   ├── src/main/java/com/ecommerce/
│   │   │   ├── user/
│   │   │   │   ├── controller/
│   │   │   │   ├── domain/
│   │   │   │   ├── repository/
│   │   │   │   ├── service/
│   │   │   │   └── UserApplication.java
│   │   ├── src/main/resources/
│   │   │   └── application.yml
│   │   ├── build.gradle
│   ├── service-product                      # service-user와 동일
└── └── service-order                        # service-user와 동일
```

<br />

### Gradle 설정

#### settings.gradle

```groovy
rootProject.name = 'ecommerce-monolith-to-msa'

// MSA 서비스들 포함
include 'service-user'
include 'service-product'
include 'service-order'

// 서비스들의 실제 경로 지정
project(':service-user').projectDir = new File(settingsDir, 'services/service-user')
project(':service-product').projectDir = new File(settingsDir, 'services/service-product')
project(':service-order').projectDir = new File(settingsDir, 'services/service-order')
```

#### 루트 build.gradle

```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.4.0' apply false
    id 'io.spring.dependency-management' version '1.1.4' apply false
}

// 모든 프로젝트 공통 설정
allprojects {
    group = 'com.ecommerce'
    version = '1.0.0'

    repositories {
        mavenCentral()
    }
}

// 서브 프로젝트 설정
subprojects {
    apply plugin: 'java'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'

    java {
        sourceCompatibility = JavaVersion.VERSION_17
    }

    configurations {
        compileOnly {
            extendsFrom annotationProcessor
        }
    }

    // 공통 의존성 설정
    dependencies {
        implementation 'org.springframework.boot:spring-boot-starter'
        implementation 'org.springframework.boot:spring-boot-starter-actuator'
        implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
        implementation 'org.springframework.boot:spring-boot-starter-validation'
        implementation 'org.springframework.boot:spring-boot-starter-web'
        compileOnly 'org.projectlombok:lombok'
        runtimeOnly 'com.h2database:h2'
        annotationProcessor 'org.projectlombok:lombok'
        testImplementation 'org.springframework.boot:spring-boot-starter-test'
        testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
    }
    
    tasks.named('test') {
        useJUnitPlatform()
    }
}
```
